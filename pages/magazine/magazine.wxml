<!--pages/magazine/magazine.wxml-->
<view class="full warp">
  <swiper 
    autoplay="{{autoplay}}" circular 
    bindanimationfinish="bannerChange"
    >
    <block wx:for="{{data.subHeadImg}}" wx:key='key'>
      <swiper-item class='box'>
        <view class="banner-warp flex-col">
          <image src="{{imgUrl+data.magazineNum+'/'+item}}" mode="{{imgType}}" class="banner-image" />
        </view>
      </swiper-item>
    </block>
  </swiper>
  <view class="cover-bg">
    <view class="warp flex-col text-white">
      <text class="describe text-opacity">已有{{data.sold}}订阅</text>
      <text class="title">{{data.name}}</text>
      <!-- <view class="describe">
        查看订阅详情 
        <image src="/images/link.png" class="icon"></image>
      </view> -->
      <view class="flex btn-warp">
        <view bindtap="goDetail">阅读</view>
        |
        <view bindtap='subscribe'>订阅</view>
      </view>
      <view class="icon-warp">
       <image src="/images/down.png" class="icon"></image>
      </view>
    </view>
  </view>
</view>
<view class="container session">
  <view class="a-line title">{{data.name}}</view>
  <view class="content">{{data.describe}}</view>
</view>
<view class="hr"></view>

<view class="session">
  <view class="title text-center text-strong">订阅排行榜</view>

  <view wx:for="{{ rankingList }}" wx:key='key'
  class="flex media flex-between">
    <view class="flex ">
      <view class="text-strong text-barge">{{ index+1 }}</view>
      <view>
        <image src="{{ item.user[0].headImg }}" class="headImg"></image>
      </view>
      <view class="flex flex-col">
        <text>{{ item.user[0].nickName }}</text>
      </view>
    </view>
    <view >
        <text class="describe">订阅{{ item.buyNum }}本</text>
    </view>
  </view>



</view>

<!-- 阅读吗弹框 -->
<view class='cover' wx:if="{{readCord}}">
  <view class="fixed-btm bg-white session">
    <view class="a-line text-left title">请输入阅读吗兑换期刊</view>
    <view class='content'>
      使用阅读码成功兑换期刊后，可免费阅读期刊。已兑换过的期刊无法再次兑换，可将阅读码分享给其他好友。
    </view>
    <input class='input' type='number' bindinput="bindKeyInput" placeholder='输入阅读码'></input>
    <view class='btn2-warp'>
      <view class='btn btn-cencel' bindtap='cancelReadCord'>取消</view>
      <view class='btn btn-red' bindtap='readByCord'>确定</view>
    </view>
  </view>
</view>
<!-- 订阅弹框 -->
<view class='cover' wx:if="{{ purchase}}">
  <view class="fixed-btm bg-white session">
     <view class="a-line text-left title">{{data.title}}</view>
      <view class="content">点此查看购买说明</view>
      <view>
         <radio-group class="radio-group" bindchange="radioChange">
                <radio class="radio" wx:for-items="{{setMeal}}" wx:key="name"  value="{{index}}" checked="{{item.checked}}">
                    <view>
                      {{item.number}}本
                      <text class='abs-right'>￥{{item.price}}</text>
                    </view>
                </radio>
            </radio-group>
      </view>
      <view class='btn2-warp'>
        <view class='btn btn-cencel' bindtap='cancelPurchase'>取消</view>
        <view class='btn btn-red' bindtap='purchaseMgz'>确认支付</view>
    </view>
  </view>
</view>


