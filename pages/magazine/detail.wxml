<!--wxml 判断 url 是图片还是视频-->
<wxs module="match">
  var matchType = function(url) {
    var reg = getRegExp('\.mp4|\.wmv|\.MP4');
    return reg.test(url) ? 'video' : 'image'
  };
  module.exports.matchType = matchType;
</wxs>
<!-- 加载动画 （图片上涨） -->
<view class="loading-cover {{progress >= loadCompleteRate ? 'hide':'show'}}">
  <view class="relative">
    <view class="loading-bg-black"></view>
    <view class="loading-bg-gray"></view>
    <view class="loading-bg-red" style="height:{{progress}}%"></view>
    <image class="loadImg" mode="widthFix" src="../../images/loading.png"></image>
  </view>
</view>

<!-- 加载动画2 显示百分比 -->
<!-- 
<view class="loading-cover flex-col image-cover {{progress >= 95 ? 'hide':'show'}}">
  <image class="loadImg"  wx:if="{{data.magazineNum}}"
  src="{{ imgUrl+data.magazineNum+'/'}}{{ data.subHeadImg[1] }}"></image>
  <view class="img-cover"></view>
  <text class="progressText">
  {{progress}}%
  </text>
</view> -->
<import src="../../wxParse/wxParse.wxml"/> 

<view class="full warp">
  <swiper autoplay="{{autoplay}}" bindchange="bindchange">

    <block wx:for="{{data.content}}" wx:key='key'>
      <swiper-item class=''>
        <block wx:for="{{item}}" wx:for-index="idx" wx:key='{{idx}}'>

          <block wx:if="{{item.type=='image'}}" >
            <image bindload="imgLoad" src="{{item.content}}" mode="{{imgType}}" 
            class="banner-image content  {{index===current ? item.className : idx}}" style='{{item.style}}' />
          </block>
          <block wx:if="{{item.type=='text'}}">
          
            <view class="content {{item.className}}" style='{{item.style}}'>
                <template is="wxParse" 
                data="{{wxParseData:article.nodes}}"/>
            </view>
          </block>


        </block>
      </swiper-item>
    </block>



  </swiper>
  <!-- 视频播放卡慢，或者出错的时候触发 -->
  <!-- <view class="reload" bindtap="reLoadVideo">
    <text>{{videoHini}}</text>
    <image 
     class="reload-img"
     src="/images/reload.png" 
     >
    </image>
  </view> -->

</view>